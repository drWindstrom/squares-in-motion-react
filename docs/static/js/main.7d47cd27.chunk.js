(this["webpackJsonpsquares-in-motion-react"]=this["webpackJsonpsquares-in-motion-react"]||[]).push([[0],{11:function(e,t,n){},12:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(1),i=n.n(c),a=n(5),u=n.n(a),s=n(2),o=n(3),d=[];function l(e,t){switch(t.type){case"SET":return t.squares;case"ROTATE":return e.map((function(e,n){return n<t.spinningNumber&&(e=Object(o.a)(Object(o.a)({},e),{},{rotation:e.rotation+1})),e}));case"TOGGLE_HIGHLIGHT":return e.map((function(e){return e===t.changed&&(e=Object(o.a)(Object(o.a)({},e),{},{isHighligted:!e.isHighligted})),e}));case"TOGGLE_SELECT":return e.map((function(e){return e===t.changed&&(e=Object(o.a)(Object(o.a)({},e),{},{isSelected:!e.isSelected})),e}));case"DESELECT_ALL":return e.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{isSelected:!1})}));case"TRANSLATE_SELECTED_SQUARES":return e.map((function(e){return e.isSelected&&(e=Object(o.a)(Object(o.a)({},e),{},{x:e.x+t.delta.x,y:e.y-t.delta.y})),e}));default:throw new Error}}function j(e){return{type:"TOGGLE_HIGHLIGHT",changed:e}}var b=0,h=void 0,f=[];var O=function(e){var t=e.dispatch,n=Object(c.useState)(40),i=Object(s.a)(n,2),a=i[0],u=i[1],o=Object(c.useState)(100),d=Object(s.a)(o,2),l=d[0],j=d[1],O=Object(c.useState)(0),g=Object(s.a)(O,2),x=g[0],p=g[1],v=Object(c.useState)(30),m=Object(s.a)(v,2),y=m[0],S=m[1],E=Object(c.useState)(0),L=Object(s.a)(E,2),w=L[0],T=L[1];function k(){h&&(clearInterval(h),h=void 0)}var M=1.75*a;function q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(0===f.length||f.length<e)return 0;var t=function(e,t){return e+t};if(0===e){var n=f.reduce(t);return Math.round(n/f.length)}var r=f.slice(f.length-e),c=r.reduce(t);return Math.round(c/r.length)}return Object(r.jsxs)("div",{id:"sidebar-inputs",children:[Object(r.jsx)("label",{htmlFor:"side-length",children:"Side length:"}),Object(r.jsx)("input",{type:"number",id:"side-length",name:"side-length",defaultValue:a,onChange:function(e){return u(Number(e.target.value))}}),Object(r.jsx)("label",{htmlFor:"num-squares",children:"Number of squares:"}),Object(r.jsx)("input",{type:"number",id:"num-squares",name:"num-squares",defaultValue:l,onChange:function(e){return j(Number(e.target.value))}}),Object(r.jsx)("label",{htmlFor:"num-spinning",children:"Number spinning:"}),Object(r.jsx)("input",{type:"number",id:"num-spinning",name:"num-spinning",defaultValue:x,onChange:function(e){return p(Number(e.target.value))}}),Object(r.jsx)("label",{htmlFor:"req-fps",children:"Frames per sec:"}),Object(r.jsx)("input",{type:"number",id:"req-fps",name:"req-fps",defaultValue:y,onChange:function(e){return S(Number(e.target.value))}}),Object(r.jsxs)("div",{children:[Object(r.jsx)("button",{onClick:function(){f=[],function(){for(var e=Math.round(Math.sqrt(l)),n=[],r=1;r<=l;r++){var c=Math.ceil(r/e),i=M*(r-(c-1)*e),u=M*c,s={id:r.toString(),x:i,y:u,sideLength:a,rotation:0,isHighligted:!1,isSelected:!1};n.push(s)}t((o=n,{type:"SET",squares:o}));var o}(),k(),x>0&&(h=setInterval((function(){!function(){if(0===b)return void(b=performance.now());var e=performance.now(),t=e-b,n=Math.round(1e3/t);T(n),f.push(n),b=e}(),t(function(e){return{type:"ROTATE",spinningNumber:e}}(x))}),1e3/y))},children:"Start"}),Object(r.jsx)("button",{onClick:function(){k()},children:"Stop"})]}),Object(r.jsxs)("p",{children:["Last frame: ",w," fps"]}),Object(r.jsxs)("p",{children:["Last 30 frames: ",q(30)," fps"]}),Object(r.jsxs)("p",{children:["All frames: ",q()," fps"]})]})};function g(e){return{x:e.x,y:-e.y}}var x=function(e){var t=e.origin,n=e.size,c=e.strokeWidth,i=3*c,a={x:t.x+n,y:t.y},u={x:t.x,y:t.y+n},s={x:a.x-4*i,y:a.y-3*i},o={x:u.x-3*i,y:u.y-4*i};a=g(a),u=g(u),s=g(s),o=g(o);var d=g(t);return Object(r.jsxs)("g",{children:[Object(r.jsx)("marker",{id:"arrow",viewBox:"0 0 10 10",refX:"5",refY:"5",markerWidth:i,markerHeight:i,orient:"auto-start-reverse",children:Object(r.jsx)("path",{d:"M 0 0 L 10 5 L 0 10 z"})}),Object(r.jsx)("path",{d:"M ".concat(u.x," ").concat(u.y," \n            L ").concat(d.x," ").concat(d.y," \n            L ").concat(a.x," ").concat(a.y),stroke:"black",strokeWidth:c,fill:"none",markerStart:"url(#arrow)",markerEnd:"url(#arrow)"}),Object(r.jsx)("text",{x:s.x,y:s.y,children:"X"}),Object(r.jsx)("text",{x:o.x,y:o.y,children:"Y"})]})};var p=function(e){var t=e.square,n=e.onMouseEnter,c=e.onMouseLeave,i=e.onClick,a=e.onMouseDown,u="black",s="0",o="grab";t.isHighligted&&!t.isSelected?(u="rgb(85,160,185)",s="2"):t.isSelected&&!t.isHighligted?(u="rgb(175,35,95)",s="2"):t.isSelected&&t.isHighligted&&(u="rgb(175,35,95)",s="2",o="move");var d=g({x:t.x,y:t.y});return Object(r.jsx)("rect",{x:-t.sideLength/2,y:-t.sideLength/2,width:t.sideLength,height:t.sideLength,rx:t.sideLength/10,ry:t.sideLength/10,stroke:u,strokeWidth:s,cursor:o,transform:"translate(".concat(d.x," ").concat(d.y,") rotate(").concat(t.rotation,")"),onMouseEnter:n,onMouseLeave:c,onClick:i,onMouseDown:a})};var v=function(e){var t=e.squares,n=e.dispatch,i=Object(c.useState)(0),a=Object(s.a)(i,2),u=a[0],o=a[1],d=Object(c.useState)(0),l=Object(s.a)(d,2),b=l[0],h=l[1],f=Object(c.useState)(1),O=Object(s.a)(f,2),g=O[0],v=(O[1],Object(c.useState)(!1)),m=Object(s.a)(v,2),y=m[0],S=m[1],E=Object(c.useState)(!1),L=Object(s.a)(E,2),w=L[0],T=L[1],k=Object(c.useState)({x:0,y:0}),M=Object(s.a)(k,2),q=M[0],C=M[1],H=Object(c.useRef)(void 0);Object(c.useEffect)((function(){function e(){o(H.current.clientWidth),h(H.current.clientHeight)}return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),Object(c.useEffect)((function(){function e(){y&&(S(!1),T(!0))}return window.addEventListener("mouseup",e),function(){return window.removeEventListener("mouseup",e)}}),[y]);var G=50-b,A=u/g,N=b/g;function _(e){var t=H.current.getScreenCTM(),n={x:0,y:0};return t&&(n.x=(e.clientX-t.e)/t.a,n.y=(e.clientY-t.f)/t.d),n}var D=t.map((function(e){return Object(r.jsx)(p,{square:e,onMouseEnter:function(){n(j(e))},onMouseLeave:function(){n(j(e))},onClick:function(t){return function(e,t){if(w)return T(!1),void e.stopPropagation();e.stopPropagation(),n({type:"TOGGLE_SELECT",changed:t})}(t,e)},onMouseDown:function(t){return function(e,t){t.isSelected&&0===e.button&&(e.stopPropagation(),S(!0),C(_(e)))}(t,e)}},e.id)}));return Object(r.jsxs)("svg",{ref:H,version:"1.1",width:"100%",height:"100%",viewBox:"".concat(-50," ").concat(G," ").concat(A," ").concat(N),xmlns:"http://www.w3.org/2000/svg",onMouseMove:function(e){return function(e){if(e.preventDefault(),e.stopPropagation(),y){var t=_(e),r=t.x-q.x,c=t.y-q.y;n({type:"TRANSLATE_SELECTED_SQUARES",delta:{x:r,y:c}}),C(t)}}(e)},onClick:function(e){return function(e){0===e.button&&n({type:"DESELECT_ALL"})}(e)},children:[Object(r.jsx)(x,{origin:{x:0,y:0},size:100,strokeWidth:2}),D]})};var m=function(){var e=Object(c.useReducer)(l,d),t=Object(s.a)(e,2),n=t[0],i=t[1];return Object(r.jsxs)("div",{id:"squares-in-motion",children:[Object(r.jsx)(O,{dispatch:i}),Object(r.jsx)(v,{squares:n,dispatch:i})]})};n(11);u.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(m,{})}),document.getElementById("root"))}},[[12,1,2]]]);
//# sourceMappingURL=main.7d47cd27.chunk.js.map